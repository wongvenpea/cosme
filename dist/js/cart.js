function totl(){var t=0;$(".totle").each(function(){t+=parseFloat($(this).text()),$("#susum").text(t)})}function adddel(){$(".add").each(function(){$(this).click(function(){var t,i=$(this).prev().val();i++,$(this).prev().val(i),t=parseFloat(i)*parseFloat($(this).parent().prev().text()),$(this).parent().next().text(Math.round(t)),totl()})}),$(".reduc").each(function(){$(this).click(function(){var t,i=$(this).next().val();--i<=0&&(i=1),$(this).next().val(i),t=parseFloat(i)*parseFloat($(this).parent().prev().text()),$(this).parent().next().text(Math.round(t)),totl()})})}$(function(){totl(),adddel(),$("#all").click(function(){all=$(this).prop("checked"),$(".Each").each(function(){$(this).prop("checked",all)})}),$(".del").each(function(){$(this).click(function(){$(this).parent().remove(),0==$(".imfor").length&&$("#susum").text(0),totl()})}),$(".foot_add").click(function(){$(this).parent().prev().append('<div class="imfor"><div class="check"><input type="checkbox" class="Each" /></div><div class="pudc"><img src="img/5.jpg" /><span>Fujifilm/富士 instax mini 25</span></div><div class="pices">640.6</div><div class="num"><span class="reduc">&nbsp;-&nbsp;</span><input type="text" value="1" /><span class="add">&nbsp;+</span></div><div class="totle">640.6</div><div class="del">删除</div></div>'),totl(),adddel(),$(".del").each(function(){$(this).click(function(){$(this).parent().remove(),totl()})})}),$(".foot_del").click(function(){$(".Each").each(function(){$(this).prop("checked")&&($(this).parents(".imfor").remove(),totl(),0==$(".imfor").length&&$("#susum").text(0))})})});